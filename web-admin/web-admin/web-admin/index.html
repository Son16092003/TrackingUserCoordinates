<!DOCTYPE html>
<html lang="vi">
  <head>
    <meta charset="UTF-8" />
    <title>Tracking User</title>
    <!-- Leaflet -->
    <link
      rel="stylesheet"
      href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
    />
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>

    <!-- Supabase CDN -->
    <script src="https://unpkg.com/@supabase/supabase-js@2.39.8/dist/umd/supabase.js"></script>

    <!-- XLSX library ƒë·ªÉ ƒë·ªçc/ghi Excel -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>

    <link rel="stylesheet" href="./style.css" />
  </head>
  <body>
    <!-- Title Header -->
    <header class="header-title">
      <img src="./assets/Eye V2.gif" alt="icon" class="header-icon" />
      <span>Web Admin - Tracking User</span>
    </header>

    <!-- Tabs -->
    <div class="tabs">
      <button id="tab-live" class="active">Live Tracking</button>
      <button id="tab-summary">Summary</button>
      <button id="btn-guide" class="guide-btn" title="H∆∞·ªõng d·∫´n">?</button>
    </div>

    <!-- Map containers -->
    <div id="map-live" class="map-container" style="display: block"></div>
    <div id="map-summary" class="map-container" style="display: none"></div>

    <!-- Live Sidebar -->
    <div id="live-sidebar" class="device-control">
      <h4>Thi·∫øt b·ªã Live</h4>
      <div id="device-list"></div>
    </div>

    <!-- Summary Sidebar -->
    <div id="summary-sidebar" class="device-control" style="display: none">
      <h4>Summary</h4>
      `
      <div class="filter-group">
        <label for="summary-date">Ng√†y:</label>
        <input type="date" id="summary-date" />
      </div>
      <div class="filter-group">
        <label for="summary-device">Thi·∫øt b·ªã:</label>
        <select id="summary-device"></select>
      </div>
      <div style="display:flex;gap:8px;">
        <button id="btn-summary">Xem Summary</button>
        <button id="btn-load-detail" title="Load detailed points for current view">Load detail</button>
      </div>
    </div>


    <!-- Dialog h∆∞·ªõng d·∫´n -->
    <div id="guide-dialog" class="guide-dialog" style="display: none">
      <div class="guide-content">
        <div class="guide-header">
          <h3>üîç H∆∞·ªõng d·∫´n s·ª≠ d·ª•ng</h3>
          <button id="close-guide" class="close-btn">&times;</button>
        </div>
        <div class="guide-body">
          <div class="guide-section">
            <h4>üìç √ù nghƒ©a c√°c icon tr√™n b·∫£n ƒë·ªì:</h4>
            <div class="icon-guide">
              <div class="icon-item">
                <img
                  src="./assets/Running Person.gif"
                  alt="Realtime"
                  class="guide-icon"
                />
                <div class="icon-description">
                  <strong>Realtime (ƒêang ho·∫°t ƒë·ªông)</strong><br />
                  Thi·∫øt b·ªã ƒëang g·ª≠i d·ªØ li·ªáu v·ªã tr√≠ li√™n t·ª•c
                </div>
              </div>
              <div class="icon-item">
                <img src="./assets/pause.gif" alt="Pause" class="guide-icon" />
                <div class="icon-description">
                  <strong>Pause (T·∫°m d·ª´ng)</strong><br />
                  Thi·∫øt b·ªã t·∫°m ng∆∞ng g·ª≠i d·ªØ li·ªáu (>1 ph√∫t)
                </div>
              </div>
              <div class="icon-item">
                <img
                  src="./assets/Close V3.png"
                  alt="Offline"
                  class="guide-icon"
                />
                <div class="icon-description">
                  <strong>Offline (Ngo·∫°i tuy·∫øn)</strong><br />
                  Thi·∫øt b·ªã ƒë√£ ng∆∞ng ho·∫°t ƒë·ªông (>3 ph√∫t)
                </div>
              </div>
            </div>
          </div>

          <div class="guide-section">
            <h4>üéÆ C√°ch s·ª≠ d·ª•ng:</h4>
            <ul class="guide-list">
              <li>
                <strong>Live Tracking:</strong> Theo d√µi thi·∫øt b·ªã th·ªùi gian th·ª±c
              </li>
              <li><strong>Summary:</strong> Xem l·ªãch s·ª≠ di chuy·ªÉn theo ng√†y</li>
              <li><strong>Sidebar:</strong> B·∫≠t/t·∫Øt hi·ªÉn th·ªã t·ª´ng thi·∫øt b·ªã</li>
              <li>
                <strong>Auto-fit:</strong> B·∫£n ƒë·ªì t·ª± ƒë·ªông zoom ƒë·∫øn thi·∫øt b·ªã ƒëang
                ho·∫°t ƒë·ªông
              </li>
            </ul>
          </div>

          <div class="guide-section">
            <h4>üåà V·ªát m√†u:</h4>
            <p>
              M·ªói thi·∫øt b·ªã c√≥ m√†u v·ªát kh√°c nhau ƒë·ªÉ d·ªÖ ph√¢n bi·ªát l·ªô tr√¨nh di
              chuy·ªÉn.
            </p>
          </div>
        </div>
      </div>
    </div>

    <!-- Main JS -->
    <script type="module" src="./main.js"></script>
  </body>
</html>
